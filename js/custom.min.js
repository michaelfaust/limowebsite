$(document).ready(function(){function a(){$(window).width()<=768?$(".navbar-collapse a").on("click",function(){$(".navbar-collapse").collapse("hide")}):$(".navbar .navbar-default a").off("click")}$(window).load(function(){$(".spinner").hide(),$("#home .row").show()}),$(window).scroll(function(){$(".banner-inner, .newsletter-home-text").css("opacity",1-$(window).scrollTop()/350)}),$(window).scroll(function(){"use strict";var a=$(window).scrollTop();a>60?$(".header-transparent").addClass("sticky"):$(".header-transparent").removeClass("sticky")}),$(function(){$(".scroll-to a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top},1e3),!1}})}),a(),$(window).resize(a),$('.assan-newsletter input[type="text"], .assan-newsletter input[type="email"]').live("focus keypress",function(){var a=$(this);a.hasClass("error")&&a.val("").removeClass("error"),a.hasClass("success")&&a.val("").removeClass("success")}),$(".assan-newsletter").submit(function(){var a=$(this).find('input[name="_csrf"]'),e=$(this).find('input[name="email"]'),F=$(this).find('input[name="submit"]'),s=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if(s.test(e.val())===!1)e.val("Please enter a valid email address!").addClass("error");else{a.val();e.attr("disabled","disabled"),F.attr("disabled","disabled");var u=$.ajax({url:"/signup",method:"POST",headers:{"X-CSRF-Token":a.val()},data:{email:e.val()},dataType:"json"});u.done(function(a){if(0!==parseInt(a,0)){var s=a.split("|");"success"===s[0]?(F.removeAttr("disabled"),e.removeAttr("disabled").val(s[1]).addClass("success")):(F.removeAttr("disabled"),e.removeAttr("disabled").val(s[1]).addClass("error"))}}),u.fail(function(a,s){alert("Request failed: "+s),F.removeAttr("disabled"),e.removeAttr("disabled").val("申请成功!").addClass("success")})}return!1});var e=new WOW({boxClass:"wow",animateClass:"animated",mobile:!1,live:!0});e.init()});