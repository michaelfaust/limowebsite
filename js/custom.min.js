$(document).ready(function(){function e(){$(window).width()<=768?$(".navbar-collapse a").on("click",function(){$(".navbar-collapse").collapse("hide")}):$(".navbar .navbar-default a").off("click")}$(window).scroll(function(){$(".banner-inner, .newsletter-home-text").css("opacity",1-$(window).scrollTop()/350)}),$(window).scroll(function(){"use strict";var e=$(window).scrollTop();e>60?$(".header-transparent").addClass("sticky"):$(".header-transparent").removeClass("sticky")}),$(function(){$(".scroll-to a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html,body").animate({scrollTop:e.offset().top},1e3),!1}})}),e(),$(window).resize(e),$('.assan-newsletter input[type="text"], .assan-newsletter input[type="email"]').live("focus keypress",function(){var e=$(this);e.hasClass("error")&&e.val("").removeClass("error"),e.hasClass("success")&&e.val("").removeClass("success")}),$(".assan-newsletter").submit(function(){var e=$(this).find('input[name="_csrf"]'),a=$(this).find('input[name="email"]'),s=$(this).find('input[name="submit"]'),F=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if(F.test(a.val())===!1)a.val("Please enter a valid email address!").addClass("error");else{e.val();a.attr("disabled","disabled"),s.attr("disabled","disabled");var t=$.ajax({url:"/signup",method:"POST",headers:{"X-CSRF-Token":e.val()},data:{email:a.val()},dataType:"json"});t.done(function(e){if(0!==parseInt(e,0)){var F=e.split("|");"success"===F[0]?(s.removeAttr("disabled"),a.removeAttr("disabled").val(F[1]).addClass("success")):(s.removeAttr("disabled"),a.removeAttr("disabled").val(F[1]).addClass("error"))}}),t.fail(function(e,F){alert("Request failed: "+F),s.removeAttr("disabled"),a.removeAttr("disabled").val("申请成功!").addClass("success")})}return!1});var a=new WOW({boxClass:"wow",animateClass:"animated",mobile:!1});a.init(),$("#applybtn").click(function(){$("#newsletter .desc").addClass("moveleft"),$("#newsletter .tryform").addClass("moveright")}),$("#backbtn").click(function(){$("#newsletter .desc").removeClass("moveleft"),$("#newsletter .tryform").removeClass("moveright")})});